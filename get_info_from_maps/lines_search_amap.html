<head>
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=04ecec4d88bce342a194b284491e5098"></script>

</head>
<body>

<p id="result">result</p>
<p id="stops">stops</p>
<p id="path">path</p>

<script >

//定义一个自己的全局变量
var search_global = {};

//NOTE:输入参数, 目标城市
search_global.expect_city = '上海';


//通用的error handler
function errorHandler(e) {

  console.log(e.name + ": " + e.message);
}

</script>
<script src="place_search_amap.js"></script>
<script src="lines_search_amap.js"></script>
<script src="write_to_file.js"></script>

<script >
search_global.placeSearchDone_Callback = function (city_lines_result, city_stations_result, city_stations_location_result)
{
	//console.log(city_lines_result);
	console.log("city_lines_result.length: " + city_lines_result.length + ", city_stations_result.length: " 
		+ city_stations_result.length + ", city_stations_location_result.length: " + city_stations_location_result.length);

	//TODO: 触发Line搜索
	executeLineSearch(search_global.lineSearchDone_Callback, search_global.expect_city, city_lines_result);
}
search_global.lineSearchDone_Callback = function (out_str_result)
{
	//console.log(out_str_result);
	console.log("out_str_result len: " + out_str_result.length);

	// 触发文件写入
	write_to_file(search_global.expect_city, out_str_result);
}

//入口
executePlaceSearchForCity(search_global.placeSearchDone_Callback, search_global.expect_city);
</script>

</body>